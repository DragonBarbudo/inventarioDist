(function(t){function e(e){for(var n,i,o=e[0],c=e[1],l=e[2],d=0,v=[];d<o.length;d++)i=o[d],s[i]&&v.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(v.length)v.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},s={app:0},r=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"00d4":function(t,e,a){"use strict";var n=a("e936"),s=a.n(n);s.a},"034f":function(t,e,a){"use strict";var n=a("64a9"),s=a.n(n);s.a},"053b":function(t,e,a){"use strict";var n=a("5d9f"),s=a.n(n);s.a},"400d":function(t,e,a){"use strict";var n=a("b978"),s=a.n(n);s.a},"56d7":function(t,e,a){"use strict";a.r(e);a("14c6"),a("08c1"),a("4842"),a("d9fc");var n=a("7b01"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("vs-navbar",{model:{value:t.navigationBar,callback:function(e){t.navigationBar=e},expression:"navigationBar"}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("vs-navbar-title",[t._v("Administrador")])],1),a("vs-navbar-item",{attrs:{index:"0"}},[a("router-link",{attrs:{to:"/general"}},[t._v("Vista general")])],1),a("vs-navbar-item",{attrs:{index:"1"}},[a("router-link",{attrs:{to:"/inventario"}},[t._v("Inventario")])],1),a("vs-navbar-item",{attrs:{index:"2"}},[a("router-link",{attrs:{to:"/historial"}},[t._v("Historial")])],1),a("vs-navbar-item",{attrs:{index:"3"}},[a("router-link",{attrs:{to:"/ajustes"}},[t._v("Ajustes")])],1)],1),a("router-view")],1)},r=[],i={name:"app",components:{},data:function(){return{navigationBar:0}}},o=i,c=(a("034f"),a("2877")),l=Object(c["a"])(o,s,r,!1,null,null,null),u=l.exports,d=a("bc3a"),v=a.n(d),p=a("8c4f"),m=a("fb9a"),f=a.n(m),h=(a("04f2"),a("c789"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vs-row",[a("Login")],1)}),y=[],_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vs-row",{attrs:{"vs-align":"center","vs-type":"flex","vs-justify":"space-around"}},[a("vs-col",{staticClass:"centerx",attrs:{"vs-w":"4","vs-xs":"10","vs-align":"center"}},[a("vs-card",{staticClass:"loginForm"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("h3",[t._v("Ingresar")])]),a("vs-row",{attrs:{"vs-justify":"center"}},[a("vs-input",{attrs:{placeholder:"Acceso",size:"large",maxlength:"6"},model:{value:t.accessKey,callback:function(e){t.accessKey=e},expression:"accessKey"}})],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("vs-row",{attrs:{"vs-justify":"flex-end"}},[a("vs-button",{attrs:{type:"gradient",color:"danger",icon:"chevron_right"},on:{click:t.login}},[t._v("Ingresar")])],1)],1)],1)],1)],1)},b=[],g=a("2f62"),w=a("0e44");n["a"].use(g["a"]);var x=new g["a"].Store({state:{user:null,apiurl:"https://dragonbarbudo.com/inventario/"},mutations:{login:function(t,e){t.user=e}},plugins:[Object(w["a"])()]}),j=x,k={data:function(){return{store:j,accessKey:null}},methods:{login:function(){var t=this,e=this;null==this.accessKey?this.$vs.notify({title:"Error",text:"Escribe tu clave de acceso | ' inve '",color:"danger"}):this.$api.post("login",{key:e.accessKey}).then(function(e){e.data.error?t.$vs.notify({title:"Error de clave",text:"Verifícala o intenta de nuevo",color:"danger"}):(j.commit("login",e.data),t.$vs.notify({title:"Bienvenido",color:"success"}),t.$router.push("/general"))})}}},$=k,I=(a("9718"),Object(c["a"])($,_,b,!1,null,"47512de2",null)),C=I.exports,q={name:"HOME",components:{Login:C,store:j},computed:{isUser:function(){return j.state.user}}},O=q,E=Object(c["a"])(O,h,y,!1,null,null,null),A=E.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("vs-row",{attrs:{"vs-type":"flex","vs-justify":"space-around"}},[a("vs-col",{attrs:{"vs-w":"11","vs-sm":"12","vs-type":"flex","vs-align":"center"}},[a("vs-card",{staticClass:"centerx"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("h3",[t._v("Proyecto Nuevo")])]),a("div",{staticClass:"container"},[a("vs-row",{attrs:{"vs-type":"flex","vs-justify":"center"}},[a("vs-button",{attrs:{icon:"add",size:"big",to:"/nuevo"}},[t._v("Iniciar proyecto nuevo")])],1)],1)])],1),t._l(t.projects,function(e){return a("vs-col",{key:e.id,attrs:{"vs-w":"5","vs-sm":"12","vs-type":"flex"}},[a("vs-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("vs-row",[a("vs-col",{attrs:{"vs-w":"6"}},[a("h3",[t._v(t._s(e.nombre))])]),a("vs-col",{staticClass:"text-right",attrs:{"vs-w":"6"}},[a("p",[a("small",[a("vs-icon",{attrs:{icon:"calendar_today",size:"12px"}}),a("span",[t._v(" "+t._s(e.inicio))]),a("vs-icon",{attrs:{icon:"arrow_right_alt",size:"12px"}}),a("span",[t._v(" "+t._s(e.termino))])],1)])])],1)],1),a("vs-list",t._l(e.items_equipo,function(e){return a("vs-list-item",{key:e.id,attrs:{title:e.nombre}},[t._v(t._s(e.cantidad))])}),1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("vs-row",{attrs:{"vs-type":"flex","vs-justify":"flex-end"}},[a("vs-button",{attrs:{color:"success",icon:"check",size:"small",to:"/finalizar/"+e.id}},[t._v("Finalizar")])],1)],1)],1)],1)})],2)],1)},P=[],N=(a("359c"),a("fb2b"),{name:"General",components:{store:j},data:function(){return{projects:[]}},methods:{getProjects:function(){var t=this,e=(new Date).getTime();t.$api.get("list_projects?timestamp="+e).then(function(e){Object.keys(e.data).map(function(a){t.projects.push(e.data[a])})})}},mounted:function(){this.getProjects()}}),S=N,T=(a("00d4"),Object(c["a"])(S,z,P,!1,null,null,null)),D=T.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("vs-popup",{attrs:{active:t.deletePop,title:"¿Desea eliminar el item?"},on:{"update:active":function(e){t.deletePop=e}}},[a("p",[t._v("Una vez eliminado no se podrá recuperar")]),a("vs-row",{attrs:{"vs-type":"flex","vs-justify":"flex-end"}},[a("vs-button",{attrs:{color:"danger"},on:{click:t.deleteItem}},[t._v("Eliminar")])],1)],1),a("vs-row",{attrs:{"vs-type":"flex","vs-justify":"space-around"}},[a("vs-col",{attrs:{"vs-w":"12","vs-type":"flex"}},[a("vs-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("h3",[t._v("Inventario")])]),a("template",{slot:"header"}),a("div",[a("vs-table",{attrs:{search:"",data:t.items,stripe:"",noDataText:"Vacío","max-items":"10",pagination:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.data;return t._l(n,function(e,s){return a("vs-tr",{key:s},[a("vs-td",{attrs:{data:n[s].categoria}},[a("vs-select",{attrs:{width:"100px"},on:{change:function(e){return t.update(n[s])}},model:{value:n[s].categoria,callback:function(e){t.$set(n[s],"categoria",e)},expression:"data[indx].categoria"}},t._l(t.categorias,function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.id,text:t.nombre}})}),1)],1),a("vs-td",{attrs:{data:n[s].nombre}},[t._v(t._s(n[s].nombre)),a("template",{slot:"edit"},[a("vs-input",{on:{change:function(e){return t.update(n[s])}},model:{value:n[s].nombre,callback:function(e){t.$set(n[s],"nombre",e)},expression:"data[indx].nombre"}})],1)],2),a("vs-td",{attrs:{data:n[s].cantidad}},[t._v(t._s(n[s].cantidad)),a("template",{slot:"edit"},[a("vs-input",{attrs:{type:"number",min:1,step:1},on:{blur:function(e){return t.update(n[s])}},model:{value:n[s].cantidad,callback:function(e){t.$set(n[s],"cantidad",e)},expression:"data[indx].cantidad"}})],1)],2),a("vs-td",{attrs:{data:n[s].nota}},[t._v(t._s(n[s].nota)),a("template",{slot:"edit"},[a("vs-input",{on:{change:function(e){return t.update(n[s])}},model:{value:n[s].nota,callback:function(e){t.$set(n[s],"nota",e)},expression:"data[indx].nota"}})],1)],2),a("vs-td",[a("vs-button",{attrs:{size:"small",icon:"delete",color:"danger",type:"border"},on:{click:function(e){return t.deleteItemAttempt(n[s],s)}}})],1)],1)})}}])},[a("template",{slot:"header"},[a("h3",[t._v("Items")])]),a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"categoria"}},[t._v("Categoría")]),a("vs-th",{attrs:{"sort-key":"nombre"}},[t._v("Nombre")]),a("vs-th",{attrs:{"sort-key":"cantidad"}},[t._v("Cantidad")]),a("vs-th",[t._v("Nota")]),a("vs-th",[t._v("Eliminar")])],1)],2)],1)],2)],1)],1),a("vs-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("h3",[t._v("Agregar Item")])]),a("vs-row",{attrs:{"vs-justify":"space-around"}},[a("vs-select",{model:{value:t.newItem.categoria,callback:function(e){t.$set(t.newItem,"categoria",e)},expression:"newItem.categoria"}},t._l(t.categorias,function(t,e){return a("vs-select-item",{key:e,attrs:{value:t.id,text:t.nombre}})}),1),a("vs-input",{attrs:{placeholder:"Nombre"},model:{value:t.newItem.nombre,callback:function(e){t.$set(t.newItem,"nombre",e)},expression:"newItem.nombre"}}),a("vs-input",{attrs:{placeholder:"Cantidad",type:"number"},model:{value:t.newItem.cantidad,callback:function(e){t.$set(t.newItem,"cantidad",e)},expression:"newItem.cantidad"}}),a("vs-input",{attrs:{placeholder:"Nota"},model:{value:t.newItem.nota,callback:function(e){t.$set(t.newItem,"nota",e)},expression:"newItem.nota"}})],1),a("template",{slot:"footer"},[a("vs-row",{attrs:{"vs-justify":"flex-end"}},[a("vs-button",{attrs:{color:"success",icon:"add",size:"small"},on:{click:t.addItem}})],1)],1)],2),a("vs-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("h3",[t._v("Agregar Categoría")])]),a("vs-row",{attrs:{"vs-justify":"space-around"}},[a("vs-input",{attrs:{placeholder:"Categoría"},model:{value:t.newCat.nombre,callback:function(e){t.$set(t.newCat,"nombre",e)},expression:"newCat.nombre"}})],1),a("template",{slot:"footer"},[a("vs-row",{attrs:{"vs-justify":"flex-end"}},[a("vs-button",{attrs:{icon:"add",size:"small"},on:{click:t.addCat}})],1)],1)],2)],1)},J=[],K={name:"General",components:{store:j},data:function(){return{deleteItemObj:null,deletePop:!1,newItem:{categoria:1,nombre:"",cantidad:1,nota:""},newCat:{nombre:""},newItemDialog:!1,categorias:[],items:[]}},methods:{getInventario:function(){var t=this,e=(new Date).getTime(),a="list_items?timestamp="+e;this.$api.get(a).then(function(e){Object.keys(e.data).map(function(a){t.items.push(e.data[a])})})},update:function(t){this.$api.post("update_item",t).then(function(t){})},addItem:function(){var t=this;this.newItem.nombre.length>4?this.$api.post("item",this.newItem).then(function(e){t.items.push(e.data),t.newItem={categoria:1,nombre:"",cantidad:1,nota:""},t.$vs.notify({title:"Item añadido",color:"success"})}):this.$vs.notify({title:"Asigna un nombre de item",color:"warning"})},deleteItemAttempt:function(t,e){this.deleteItemObj=t,this.deleteItemIndx=e,this.deletePop=!0},deleteItem:function(){var t=this;this.$api.post("delete_item",this.deleteItemObj).then(function(e){t.$delete(t.items,t.deleteItemIndx),t.deletePop=!1})},addCat:function(){var t=this;this.newCat.nombre.length>4?this.$api.post("categoria",this.newCat).then(function(e){t.categorias.push(e.data),t.newCat={nombre:""},t.$vs.notify({title:"Categoría añadida"})}):this.$vs.notify({title:"Asigna un nombre para la categoría",color:"warning"})}},mounted:function(){var t=this;this.getInventario(),this.$api.get("list_categorias").then(function(e){Object.keys(e.data).map(function(a){t.categorias.push(e.data[a])})})}},M=K,B=(a("053b"),Object(c["a"])(M,G,J,!1,null,null,null)),V=B.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vs-row",[a("p",[t._v("Historial")])])},L=[],U={name:"General",components:{store:j}},F=U,R=Object(c["a"])(F,H,L,!1,null,null,null),Q=R.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vs-row",{attrs:{"vs-align":"center","vs-type":"flex","vs-justify":"space-around"}},[a("vs-col",{attrs:{"vs-type":"flex","vs-justify":"center","vs-align":"center"}},[a("vs-button",{staticClass:"logout",attrs:{color:"danger"},on:{click:t.logout}},[t._v("Cerrar sesión")])],1)],1)},X=[],Y={name:"Ajustes",components:{store:j},methods:{logout:function(){j.commit("login",null),this.$router.push("/")}}},Z=Y,tt=(a("400d"),Object(c["a"])(Z,W,X,!1,null,null,null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("vs-row",{attrs:{"vs-type":"flex","vs-justify":"space-around"}},[a("vs-col",{attrs:{"vs-w":"11","vs-sm":"12","vs-type":"flex","vs-align":"center"}},[a("vs-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"text-center"},[t._v(t._s(t.hasname))])]),a("div",{staticClass:"container"},[a("vs-divider",{staticClass:"mt mb",attrs:{color:"primary"}},[t._v("Proyecto")]),a("vs-row",{attrs:{"vs-type":"flex"}},[a("vs-col",{attrs:{"vs-w":"4"}},[a("vs-input",{attrs:{label:"Nombre de proyecto",icon:"text_fields",size:"large"},model:{value:t.proyecto.nombre,callback:function(e){t.$set(t.proyecto,"nombre",e)},expression:"proyecto.nombre"}})],1),a("vs-col",{attrs:{"vs-w":"4"}},[a("vs-input",{attrs:{label:"Inicio",icon:"calendar_today",type:"date",size:"large"},model:{value:t.proyecto.fecha_inicio,callback:function(e){t.$set(t.proyecto,"fecha_inicio",e)},expression:"proyecto.fecha_inicio"}})],1),a("vs-col",{attrs:{"vs-w":"4"}},[a("vs-input",{attrs:{label:"Término",icon:"calendar_today",type:"date",size:"large"},model:{value:t.proyecto.fecha_termino,callback:function(e){t.$set(t.proyecto,"fecha_termino",e)},expression:"proyecto.fecha_termino"}})],1)],1),a("vs-divider",{staticClass:"mt mb",attrs:{color:"primary"}},[t._v("Equipo")]),a("vs-row",{attrs:{"vs-type":"flex"}},[a("vs-col",{attrs:{"vs-w":"6"}},[a("div",{staticClass:"ml mr"},[a("vs-card",{staticClass:"equipocard"},[a("vs-table",{attrs:{data:t.proyecto.itemsEquipo,stripe:"",noDataText:"Vacío","max-items":"10",pagination:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.data;return t._l(n,function(e,s){return a("vs-tr",{key:s},[a("vs-td",{attrs:{data:n[s].nombre}},[a("strong",[t._v(t._s(n[s].nombre))])]),a("vs-td",{attrs:{data:n[s].cantidad}},[t._v(t._s(n[s].cantidad))]),a("vs-td",[a("vs-button",{attrs:{color:"danger",size:"small",icon:"keyboard_arrow_right"},on:{click:function(a){return t.quitar(e)}}})],1)],1)})}}])},[a("template",{slot:"header"},[a("h3",[t._v("Equipo para proyecto")])]),a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"nombre"}},[t._v("Nombre")]),a("vs-th",{attrs:{"sort-key":"cantidad"}},[t._v("Cantidad")]),a("vs-th")],1)],2)],1)],1)]),a("vs-col",{attrs:{"vs-w":"6"}},[a("vs-card",[a("vs-table",{attrs:{search:"",data:t.items,stripe:"",noDataText:"Vacío","max-items":"10",pagination:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.data;return t._l(n,function(e,s){return a("vs-tr",{key:s},[a("vs-td",[a("vs-button",{attrs:{color:e.cantidad>0?"success":"warning",disabled:0==e.cantidad,size:"small",icon:"keyboard_arrow_left"},on:{click:function(a){return t.agregar(e)}}})],1),a("vs-td",{attrs:{data:n[s].nombre}},[a("strong",[t._v(t._s(e.nombre))])]),a("vs-td",{attrs:{data:n[s].cantidad}},[t._v(t._s(e.cantidad))])],1)})}}])},[a("template",{slot:"header"},[a("h3",[t._v("Inventario")])]),a("template",{slot:"thead"},[a("vs-th"),a("vs-th",{attrs:{"sort-key":"nombre"}},[t._v("Nombre")]),a("vs-th",{attrs:{"sort-key":"cantidad"}},[t._v("Cantidad")])],1)],2)],1)],1)],1),a("vs-row",{attrs:{"vs-type":"flex","vs-justify":"center"}},[a("vs-button",{attrs:{icon:"save_alt",size:"big",disabled:!t.validate},on:{click:t.guardar}},[t._v("Guardar Proyecto")])],1)],1)])],1)],1)],1)},nt=[],st=(a("7621"),a("1a9d"),{name:"Nuevo",components:{store:j},data:function(){return{proyecto:{nombre:null,itemsEquipo:[]},categorias:[],items:[]}},computed:{hasname:function(){return this.proyecto.nombre?this.proyecto.nombre:"Nuevo Proyecto"},validate:function(){return null!=this.proyecto.nombre&&(null!=this.proyecto.fecha_inicio&&(null!=this.proyecto.fecha_termino&&0!=this.proyecto.itemsEquipo.length))}},methods:{guardar:function(){var t=this;this.$vs.notify({title:"Guardando"}),this.$api.post("save_project",this.proyecto).then(function(e){"ok"==e.data.result&&t.$router.push("/general")})},agregar:function(t){var e=this.items.find(function(e){return e.id==t.id}),a=e.cantidad;if(a>0){e.cantidad=a-1;var n=this.proyecto.itemsEquipo.find(function(e){return e.id==t.id});if(n)n.cantidad=n.cantidad+1;else{var s=JSON.parse(JSON.stringify(e));s.cantidad=1,this.proyecto.itemsEquipo.push(s)}}},quitar:function(t){var e=this.proyecto.itemsEquipo.find(function(e){return e.id==t.id}),a=this.proyecto.itemsEquipo.findIndex(function(e){return e.id==t.id});e.cantidad=e.cantidad-1;var n=this.items.find(function(e){return e.id==t.id});n.cantidad=n.cantidad+1,0==e.cantidad&&this.$delete(this.proyecto.itemsEquipo,a)},categoryN:function(t){var e=this.categorias.find(function(e){return e.id==t});if(e)return e.nombre},getInventario:function(){var t=this,e=(new Date).getTime(),a="list_items?timestamp="+e;this.$api.get(a).then(function(e){Object.keys(e.data).map(function(a){t.items.push(e.data[a])})})}},mounted:function(){var t=this;this.getInventario(),this.$api.get("list_categorias").then(function(e){Object.keys(e.data).map(function(a){t.categorias.push(e.data[a])})})}}),rt=st,it=(a("a2cf"),Object(c["a"])(rt,at,nt,!1,null,"19bda4b4",null)),ot=it.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("vs-row",{attrs:{"vs-type":"flex","vs-justify":"space-around"}},[a("vs-col",{attrs:{"vs-w":"11","vs-sm":"12","vs-type":"flex","vs-align":"center"}},[a("vs-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"text-center"},[t._v(t._s(t.proyecto.nombre))])]),a("div",{staticClass:"container"},[a("vs-divider",{staticClass:"mt mb",attrs:{color:"primary"}},[t._v("Equipo utilizado")]),a("vs-row",{attrs:{"vs-type":"flex","vs-justify":"space-between"}},t._l(t.proyecto.items_equipo,function(e){return a("vs-col",{key:e.id,attrs:{"vs-w":"5","vs-sm":"12","vs-type":"flex"}},[a("vs-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("vs-row",[a("vs-col",{attrs:{"vs-w":"10"}},[a("h3",[t._v(t._s(e.nombre))])]),a("vs-col",{staticClass:"text-right",attrs:{"vs-w":"2"}},[t._v(t._s(e.cantidad))])],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("vs-row",{attrs:{"vs-type":"flex","vs-justify":"space-between"}},[a("vs-button",{attrs:{color:"danger",icon:"settings"},on:{click:function(a){return t.mandarA(e,"mantenimiento")}}},[t._v("A mantenimiento")]),a("vs-button",{attrs:{color:"success",icon:"check"},on:{click:function(a){return t.mandarA(e,"inventario")}}},[t._v("A inventario")])],1)],1)])],1)}),1),a("vs-divider",{staticClass:"mt mb",attrs:{color:"danger"}},[t._v("Mantenimiento")]),a("vs-row",{attrs:{"vs-type":"flex","vs-justify":"space-between"}},t._l(t.proyecto.items_regresar,function(e,n){return"mantenimiento"==e.ruta?a("vs-col",{key:n,attrs:{"vs-w":"5","vs-sm":"12","vs-type":"flex"}},[a("vs-card",{staticClass:"a-mantenimiento"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("h3",[t._v(t._s(e.nombre))])])])],1):t._e()}),1),a("vs-divider",{staticClass:"mt mb",attrs:{color:"success"}},[t._v("Regreso a inventario")]),a("vs-row",{attrs:{"vs-type":"flex","vs-justify":"space-between"}},t._l(t.proyecto.items_regresar,function(e,n){return"inventario"==e.ruta?a("vs-col",{key:n,attrs:{"vs-w":"5","vs-sm":"12","vs-type":"flex"}},[a("vs-card",{staticClass:"a-inventario"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("h3",[t._v(t._s(e.nombre))])])])],1):t._e()}),1)],1)])],1)],1)],1)},lt=[],ut={name:"Nuevo",components:{store:j},data:function(){return{proyecto:{nombre:null,items_equipo:[],items_regresar:[]},categorias:[],items:[]}},computed:{validate:function(){return null!=this.proyecto.nombre&&(null!=this.proyecto.fecha_inicio&&(null!=this.proyecto.fecha_termino&&0!=this.proyecto.items_equipo.length))}},methods:{moverA:function(t,e){var a=this.proyecto.items_regresar.findIndex(function(e){return e.id==t.id});this.$delete(this.proyecto.items_regresar,a);var n={items_id:t.items_id,last_project_id:t.project_id,nombre:t.nombre,ruta:e};this.proyecto.items_regresar.push(n)},mandarA:function(t,e){var a=this.proyecto.items_equipo.find(function(e){return e.id==t.id}),n=this.proyecto.items_equipo.findIndex(function(e){return e.id==t.id});a.cantidad=a.cantidad-1,0==a.cantidad&&this.$delete(this.proyecto.items_equipo,n);var s={items_id:t.items_id,last_project_id:t.project_id,nombre:t.nombre,ruta:e};this.proyecto.items_regresar.push(s)},guardar:function(){var t=this;this.$vs.notify({title:"Guardando"}),this.$api.post("save_project",this.proyecto).then(function(e){"ok"==e.data.result&&t.$router.push("/general")})},agregar:function(t){var e=this.items.find(function(e){return e.id==t.id}),a=e.cantidad;if(a>0){e.cantidad=a-1;var n=this.proyecto.items_equipo.find(function(e){return e.id==t.id});if(n)n.cantidad=n.cantidad+1;else{var s=JSON.parse(JSON.stringify(e));s.cantidad=1,this.proyecto.items_equipo.push(s)}}},quitar:function(t){var e=this.proyecto.items_equipo.find(function(e){return e.id==t.id}),a=this.proyecto.items_equipo.findIndex(function(e){return e.id==t.id});e.cantidad=e.cantidad-1;var n=this.items.find(function(e){return e.id==t.id});n.cantidad=n.cantidad+1,0==e.cantidad&&this.$delete(this.proyecto.items_equipo,a)},categoryN:function(t){var e=this.categorias.find(function(e){return e.id==t});if(e)return e.nombre},getInventario:function(){var t=this,e=(new Date).getTime(),a="list_items?timestamp="+e;this.$api.get(a).then(function(e){Object.keys(e.data).map(function(a){t.items.push(e.data[a])})})},getProject:function(){var t=this,e=this.$route.params.id;this.$api.post("project",{id:e}).then(function(e){t.proyecto=e.data,t.proyecto.items_regresar=[]})}},mounted:function(){var t=this;this.getProject(),this.getInventario(),this.$api.get("list_categorias").then(function(e){Object.keys(e.data).map(function(a){t.categorias.push(e.data[a])})})}},dt=ut,vt=(a("dcbd"),Object(c["a"])(dt,ct,lt,!1,null,"d76c80fe",null)),pt=vt.exports;n["a"].use({install:function(t){t.prototype.$api=v.a.create({baseURL:j.state.apiurl,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}),n["a"].use(p["a"]),n["a"].use(f.a),n["a"].config.productionTip=!1;var mt=[{path:"/",component:A},{path:"/general",component:D,meta:{requiresAuth:!0}},{path:"/inventario",component:V,meta:{requiresAuth:!0}},{path:"/historial",component:Q,meta:{requiresAuth:!0}},{path:"/ajustes",component:et,meta:{requiresAuth:!0}},{path:"/nuevo",component:ot,meta:{requiresAuth:!0}},{path:"/finalizar/:id",component:pt,meta:{requiresAuth:!0}}],ft=new p["a"]({routes:mt});ft.beforeEach(function(t,e,a){t.meta.requiresAuth?j.state.user?a():a("/"):a()}),new n["a"]({router:ft,store:j,render:function(t){return t(u)}}).$mount("#app")},"57c1":function(t,e,a){},"5d9f":function(t,e,a){},"64a9":function(t,e,a){},9718:function(t,e,a){"use strict";var n=a("ce6f"),s=a.n(n);s.a},a2cf:function(t,e,a){"use strict";var n=a("f48e"),s=a.n(n);s.a},b978:function(t,e,a){},ce6f:function(t,e,a){},dcbd:function(t,e,a){"use strict";var n=a("57c1"),s=a.n(n);s.a},e936:function(t,e,a){},f48e:function(t,e,a){}});
//# sourceMappingURL=app.05a927e7.js.map